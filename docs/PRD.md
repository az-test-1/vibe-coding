í˜•ë‹˜, ì§€ê¸ˆê¹Œì§€ ì •ë¦¬ëœ **Value Positioning / í•µì‹¬ ë¬¸ì œ / ìš°ì„ ìˆœìœ„ / 3ëª… í˜ë¥´ì†Œë‚˜ ì¸í„°ë·°**ë¥¼ ëª¨ë‘ í•˜ë‚˜ë¡œ í†µí•©í•´ì„œ
**Next.js + Supabase + OpenAI** ê¸°ì¤€ì˜ **ì‹¤í–‰ ê°€ëŠ¥í•œ PRD**ë¡œ êµ¬ì„±í–ˆë‹¤.
ì¡°ì§ì— ë°”ë¡œ ê³µìœ í•´ë„ ë  ìˆ˜ì¤€ìœ¼ë¡œ êµ¬ì¡°í™”í•´ë†¨ë‹¤.

---

# ğŸ“ **PRD â€“ YouTube ëŸ¬ë‹ ì„¸ì»¨ë“œ ë¸Œë ˆì¸ (MVP)**

ìµœì¢… ì—…ë°ì´íŠ¸ì¼: YYYY-MM-DD
ë‹´ë‹¹: PM(í˜•ë‹˜), FE, BE

---

# 1. Executive Summary

### ğŸ”¥ ëª©ì 

ìœ íŠœë¸Œ ê¸°ë°˜ í•™ìŠµ ì‚¬ìš©ì(ì¬ë¬¸Â·ì§€í˜œÂ·ì„¸í›ˆ ê°™ì€ ì§€ì‹ ë…¸ë™ì)ê°€ **â€œë³¸ ì˜ìƒì˜ ì •í™•í•œ êµ¬ê°„â€**ì„ ë‹¤ì‹œ ì°¾ì§€ ëª»í•´
í•™ìŠµÂ·ì—…ë¬´ íš¨ìœ¨ì´ ë–¨ì–´ì§€ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” **ê°œì¸ìš© ì˜ìƒ ì§€ì‹ ìë™í™” ì„œë¹„ìŠ¤**.

### ğŸ¯ í•µì‹¬ ê°€ì¹˜ (Value Positioning ê¸°ë°˜)

ìš°ë¦¬ ì œí’ˆì€ ìœ íŠœë¸Œë¡œ ë°°ìš°ëŠ” ì§€ì‹ë…¸ë™ìê°€ **í•„ìš”í•œ ìˆœê°„ì— â€˜ê·¸ ì˜ìƒì˜ ê·¸ ë¶€ë¶„â€™ì„ ì°¾ì§€ ëª»í•˜ëŠ” ìƒí™©ì—ì„œ**,
ë¶ë§ˆí¬Â·ë…¸íŠ¸Â·ì‹œì²­ê¸°ë¡ ê°™ì€ ê¸°ì¡´ ë°©ì‹ë³´ë‹¤ **ì••ë„ì ìœ¼ë¡œ ë¹ ë¥´ê³  ì •í™•í•˜ê²Œ**
ì˜ìƒ ì† í•µì‹¬ êµ¬ê°„ì„ **ìë™ êµ¬ì¡°í™”Â·ìš”ì•½Â·ê²€ìƒ‰ ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ì–´**,
í•™ìŠµ ë‚´ìš©ì„ **ì¦‰ì‹œ ì¬í™œìš©**í•˜ë„ë¡ ë•ëŠ”ë‹¤.

### ê¸°ëŒ€ íš¨ê³¼

* í•™ìŠµâ†’ì •ë¦¬â†’ë³µìŠµê¹Œì§€ì˜ ì‚¬ì´í´ 70% ë‹¨ì¶•
* ìˆ˜ë™ ì •ë¦¬ ë£¨í‹´ ì™„ì „íˆ ì œê±°
* â€œë´¤ëŠ”ë° ëª» ì°¾ëŠ”â€ ì‹¤íŒ¨ ê²½í—˜ ì œê±°ë¡œ ì„œë¹„ìŠ¤ ì§€ì† ì‚¬ìš© ê°€ëŠ¥ì„±â†‘

---

# 2. Problem Statement

### í˜„ì¬ ë¬¸ì œ

ì˜ìƒ ê¸°ë°˜ í•™ìŠµì€ ë§ì§€ë§Œ **ë‹¤ì‹œ í•„ìš”í•  ë•Œ ì¬ê²€ìƒ‰ì´ ë¶ˆê°€ëŠ¥í•œ êµ¬ì¡°**.
3ëª…ì˜ ëŒ€í‘œ í˜ë¥´ì†Œë‚˜ ëª¨ë‘ ë™ì¼í•œ ë¬¸ì œ íŒ¨í„´ì„ ê°€ì§:

* ì˜ìƒì€ í…ìŠ¤íŠ¸ì²˜ëŸ¼ í›‘ì–´ë³´ê¸°Â·ê²€ìƒ‰ì´ ì•ˆ ë¨
* â€œì–´ë””ì„œ ë³¸ ë‚´ìš©ì¸ì§€â€ ê¸°ì–µ ë¶ˆê°€
* íƒ€ì„ìŠ¤íƒ¬í”„ ìˆ˜ë™ ê¸°ë¡ì€ ë¹„í˜„ì‹¤ì 
* ë©”ëª¨/ë¶ë§ˆí¬ëŠ” ê²°êµ­ ë‹¤ì‹œ ì°¾ëŠ” ë° ì‹¤íŒ¨
* ë°”ì˜ë©´ ë£¨í‹´ì´ ì¦‰ì‹œ ë¶•ê´´

### ì‚¬ìš©ìê°€ ê²ªëŠ” ë¬¸ì œ (ìš”ì•½)

* **ê²€ìƒ‰ ë¶ˆê°€ëŠ¥ì„±** â†’ ë‹¤ì‹œ ì°¾ê¸° ì§€ì˜¥
* **ìˆ˜ë™ ì •ë¦¬ í”¼ë¡œ** â†’ ë…¸íŠ¸ì•± ì—´ê¸°ë„ ì‹«ì–´ì§
* **ë§¥ë½ ë‹¨ì ˆ** â†’ ì˜ìƒ ì§€ì‹ì´ í…ìŠ¤íŠ¸ ì§€ì‹ê³¼ ì—°ê²°ë˜ì§€ ì•ŠìŒ
* **ë£¨í‹´ ë¶•ê´´** â†’ ìŒ“ì´ëŠ” ì˜ìƒ â†’ ë¯¸ë£¨ê¸° â†’ í¬ê¸°

### ì´ ê¸°ëŠ¥ì´ ì—†ì„ ê²½ìš° ë¦¬ìŠ¤í¬

* ìœ ì €ëŠ” ê²°êµ­ ê¸°ì¡´ ë°©ì‹(ìœ íŠœë¸Œ ë¶ë§ˆí¬/Notion)ì— íšŒê·€
* ì˜ìƒ ì§€ì‹ì€ ê³„ì† â€˜ë§ê°â€™ë˜ê³  ì‹¤ì§ˆì  ê°€ì¹˜ê°€ ìŒ“ì´ì§€ ì•ŠìŒ

---

# 3. Goals & Success Metrics

### ğŸ¯ Output Metric

* **ì¬ì‹œì²­ ê²€ìƒ‰ ì„±ê³µë¥  80% ì´ìƒ**
  (â€œì´ ë‚´ìš© ì–´ë”” ìˆì—ˆì§€?â€ ì§ˆë¬¸ì— 5ì´ˆ ì´ë‚´ ë„ë‹¬ ê°€ëŠ¥)

### ğŸ”§ Input Metric

* í•˜ë£¨ 1ê°œ ì´ìƒ ì˜ìƒ ìë™ìš”ì•½ ì²˜ë¦¬ëœ ì‚¬ìš©ì ë¹„ì¤‘ 30%
* ìë™ íƒœê·¸/í•˜ì´ë¼ì´íŠ¸ ìƒì„± ì •í™•ë„ì— ëŒ€í•œ ì‚¬ìš©ì ê¸ì •ë¥  70%
* â€œíƒ€ì„ìŠ¤íƒ¬í”„ ìë™ ì¸ì‹â€ ì‚¬ìš©ë¥  60%

### Guardrails / Non-goals

* ì „ì²´ ìœ íŠœë¸Œ ë‹¤ìš´ë¡œë“œ/ì €ì‘ê¶Œ ìš°íšŒ ê¸°ëŠ¥ **ì œì™¸**
* ë…¸íŠ¸ì•± ì „ì²´ êµì²´ë¥¼ ëª©í‘œë¡œ í•˜ì§€ ì•ŠìŒ
* ì „ë¬¸ê°€ ìˆ˜ì¤€ì˜ ì •ë°€ transcript í¸ì§‘ **ë¹„í¬í•¨(MVP)**

---

# 4. Solution Overview

## ğŸ¯ í•µì‹¬ ê°€ì¹˜ ì œì•ˆ (MVP ê¸°ì¤€)

### **â€œìœ íŠœë¸Œ ì˜ìƒ â†’ êµ¬ì¡°í™”ëœ ì§€ì‹â€ì„ ìë™ìœ¼ë¡œ ìƒì„±**

1. **ìë™ ìš”ì•½** (OpenAI)
2. **ìë™ íƒ€ì„ìŠ¤íƒ¬í”„ í•˜ì´ë¼ì´íŠ¸** (LLM ê¸°ë°˜ ì˜ë¯¸ ë‹¨ìœ„ ë¶„í•´)
3. **ê²€ìƒ‰ ê°€ëŠ¥í•œ ì¸ë±ìŠ¤ ìƒì„±** (í‚¤ì›Œë“œ/êµ¬ë¬¸/ì§ˆë¬¸ â†’ í•´ë‹¹ êµ¬ê°„ ì í”„)
4. **ë³¸ ë‚ ì§œÂ·ë¬¸ì¥Â·êµ¬ê°„ ìë™ ì €ì¥**
5. **Supabase ê¸°ë°˜ ê°œì¸ ì§€ì‹ ì €ì¥ì†Œ**

---

## ğŸ”‘ í•µì‹¬ ê¸°ëŠ¥ / ìš°ì„ ìˆœìœ„

### **P0 (MVP í•„ìˆ˜)**

1. **YouTube URL ì…ë ¥ â†’ ìë™ ìš”ì•½ / ìë™ í•˜ì´ë¼ì´íŠ¸ ìƒì„±**
2. **ì˜ë¯¸ ë‹¨ìœ„ íƒ€ì„ìŠ¤íƒ¬í”„ ìë™ ìƒì„±**
3. **í…ìŠ¤íŠ¸Â·êµ¬ê°„ ê¸°ë°˜ ê²€ìƒ‰ ê¸°ëŠ¥**
4. **ë³¸ ë‚ ì§œ / êµ¬ê°„ë³„ ë©”ëª¨ ìë™ ì €ì¥ (Supabase ì—°ë™)**
5. **í‚¤ì›Œë“œ ê¸°ë°˜ ì¬ê²€ìƒ‰ â†’ í•´ë‹¹ êµ¬ê°„ ì¦‰ì‹œ ì¬ìƒ**

â†’ **ì¬ë¬¸/ì§€í˜œ/ì„¸í›ˆì˜ í•µì‹¬ Pain Point 80% í•´ê²°**

---

### **P1 (ê²½í—˜ ê°•í™” ê¸°ëŠ¥)**

1. Notion/Obsidian ìš© **ìë™ í˜ì´ì§€ ìƒì„± Export**
2. ê°œì¸ë³„ ë°˜ë³µ ì‹œì²­ êµ¬ê°„ ìë™ ì¶”ì¶œ
3. â€œë‚˜ì¤‘ì— ë‹¤ì‹œ ë³´ê¸°â€ AI ì¶”ì²œ
4. ìš”ì•½ ì••ì¶•(1ë¬¸ì¥/3ë¬¸ì¥/í•µì‹¬ ë…¼ì )

---

### **P2 (í™•ì¥ ê¸°ëŠ¥)**

1. ê°•ì˜/ì„¸ë¯¸ë‚˜ ë“± ê¸´ ì˜ìƒ ìë™ ì±•í„°ë§ ê³ ë„í™”
2. ì—¬ëŸ¬ ì˜ìƒ ê°„ ê°œë… ì—°ê´€ ê·¸ë˜í”„

---

# 5. ì‚¬ìš©ì íë¦„ (User Flow)

### **1) URL ì…ë ¥**

* ì‚¬ìš©ìëŠ” YouTube URLì„ ì…ë ¥
* ë°±ì—”ë“œ: ì˜ìƒ transcript íšë“ â†’ OpenAIë¡œ ë¶„ì„

### **2) ìë™ ë¶„ì„**

* OpenAI â†’

  * êµ¬ê°„ë³„ í•˜ì´ë¼ì´íŠ¸
  * í•µì‹¬ ë¬¸ì¥
  * ì£¼ìš” ê°œë…
  * í‚¤ì›Œë“œ
  * ì§ˆë¬¸ ê¸°ë°˜ ì ‘ê·¼ìš© Q/A

* ê²°ê³¼ëŠ” Supabase DBÂ·Storageì— ì €ì¥

### **3) ê²°ê³¼ í™”ë©´ (Next.js FE)**

* ì˜ìƒ í”Œë ˆì´ì–´ + êµ¬ê°„ ë¦¬ìŠ¤íŠ¸
* êµ¬ê°„ í´ë¦­ ì‹œ í•´ë‹¹ íƒ€ì„ìŠ¤íƒ¬í”„ë¡œ ì í”„
* ê²€ìƒ‰ì°½ ì…ë ¥ ì‹œ êµ¬ê°„ ì¸ë±ìŠ¤ ì¦‰ì‹œ í•„í„°ë§

### **4) ê°œì¸ ì§€ì‹ ì €ì¥**

* â€œë³¸ ë‚ ì§œâ€ ìë™ ìƒì„±
* â€œë‚´ê°€ ë³¸ í•µì‹¬ ë¬¸ì¥â€ ë¦¬ìŠ¤íŠ¸ ìë™ ì €ì¥
* ì¬ê²€ìƒ‰/ì¬í•™ìŠµ í™”ë©´ ì œê³µ

---

# 6. ê¸°ëŠ¥ ìƒì„¸ (ë°±ì—”ë“œ/í”„ë¡ íŠ¸ ê¸°ì¤€)

---

## ğŸ› ë°±ì—”ë“œ (Next.js Edge Functions + Supabase + OpenAI)

### 1) Transcription Retrieval API

* ì…ë ¥: YouTube URL
* ê³¼ì •:

  * transcript ì¶”ì¶œ (YouTube API / ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬)
  * Supabase Storage ì €ì¥

### 2) LLM ë¶„ì„ ì²˜ë¦¬

* OpenAI API í˜¸ì¶œ
* ê¸°ëŠ¥:

  * ìš”ì•½(summarize)
  * ì˜ë¯¸ ë‹¨ìœ„ segmentation
  * keyword extraction
  * Q/A ì¸ë±ì‹±

### 3) DB ì €ì¥ (Supabase)

* `videos`
* `highlights`
* `segments`
* `keywords`
* `user_notes`

### 4) Search API

* í‚¤ì›Œë“œ ê²€ìƒ‰ â†’ êµ¬ê°„ ì¶”ì²œ
* ë¬¸ì¥ ê²€ìƒ‰ â†’ í•´ë‹¹ segment ë°˜í™˜
* ì§ˆë¬¸ ê²€ìƒ‰ â†’ Q/A ë§¤ì¹­

---

## ğŸ’» í”„ë¡ íŠ¸ì—”ë“œ (Next.js 13 App Router)

### í•µì‹¬ í™”ë©´

1. **Home** â€“ URL ì…ë ¥
2. **Video Detail** â€“

   * ì˜ìƒ ì¬ìƒ
   * í•˜ì´ë¼ì´íŠ¸ ë¦¬ìŠ¤íŠ¸
   * êµ¬ê°„ ì í”„
   * ìë™ ìš”ì•½
3. **Search** â€“

   * í‚¤ì›Œë“œ ê²€ìƒ‰
   * êµ¬ê°„ í•„í„°ë§
4. **My Library** â€“

   * ë³¸ ë‚ ì§œ ê¸°ì¤€ ì •ë ¬
   * ì €ì¥ëœ ë¬¸ì¥/í•˜ì´ë¼ì´íŠ¸ ëª©ë¡

---

# 7. ì œí•œì‚¬í•­

* ë°˜ìë™ ì „í™˜ì€ ì œê³µí•˜ì§€ë§Œ, **ì˜ìƒ ë‹¤ìš´ë¡œë“œÂ·ì €ì‘ê¶Œ ìš°íšŒ**ëŠ” ì œê³µí•˜ì§€ ì•ŠìŒ
* OpenAI í˜¸ì¶œëŸ‰ ì¦ê°€ì— ë”°ë¥¸ ë¹„ìš© ì¦ëŒ€ ê³ ë ¤
* ê¸´ ì˜ìƒ(>2ì‹œê°„)ì€ ì²˜ë¦¬ ì‹œê°„ ì¦ê°€ ê°€ëŠ¥
* ìœ íŠœë¸Œ Transcriptê°€ ì—†ëŠ” ì˜ìƒì€ í’ˆì§ˆ ì €í•˜ ë°œìƒ

---

# 8. í–¥í›„ ë¦¬ìŠ¤í¬ ë° ëŒ€ì‘

### ë°ì´í„° í’ˆì§ˆ ë¦¬ìŠ¤í¬

* ì˜ìƒ ë‚´ìš©/ê°•í•œ ì–µì–‘ì— ë”°ë¥¸ transcript í’ˆì§ˆ ë¶ˆì•ˆ
  â†’ í›„ì²˜ë¦¬ LLM ê¸°ë°˜ ë³´ì • ë‹¨ê³„ ë„ì…(P1)

### ë¹„ìš© ë¦¬ìŠ¤í¬

* ë¶„ì„ë‹¹ OpenAI ì‚¬ìš© ë‹¨ê°€
  â†’ ì„¸ê·¸ë¨¼íŠ¸ ë‹¨ìœ„ chunk ì²˜ë¦¬ë¡œ ìµœì í™”

### UX ë¦¬ìŠ¤í¬

* ì²˜ìŒ ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì´í•´ ëª»í•  ê°€ëŠ¥ì„±
  â†’ ì˜¨ë³´ë”© íŠœí† ë¦¬ì–¼ ì¶”ê°€

---

# 9. ì„±ê³µ ê¸°ì¤€ (MVP Exit Criteria)

* 30ëª… ë² íƒ€ ì‚¬ìš©ì ì¤‘ **24ëª… ì´ìƒ**ì´
  â€œì˜ìƒì˜ íŠ¹ì • êµ¬ê°„ì„ ì´ì „ë³´ë‹¤ ì‰½ê²Œ ì°¾ì•˜ë‹¤â€ê³  ë‹µë³€
* ì˜ìƒ 30ê°œ ì´ìƒ ì²˜ë¦¬í•œ ì‚¬ìš©ì 30% ì´ìƒ
* ì¬ë°©ë¬¸ìœ¨(D7) 40% ì´ìƒ
* ê²€ìƒ‰ ê¸°ëŠ¥ ì‚¬ìš©ë¥  60% ì´ìƒ

---
ì¢‹ë‹¤ í˜•ë‹˜, ì´ì œ ì§„ì§œ â€œë§Œë“¤ ìˆ˜ ìˆëŠ”â€ ìˆ˜ì¤€ê¹Œì§€ ìª¼ê°œë³´ì.
ì•„ë˜ì— **ì™€ì´ì–´í”„ë ˆì„ Â· API ì„¤ê³„ Â· Supabase ìŠ¤í‚¤ë§ˆ Â· í”Œë¡œìš°** í•œ ë²ˆì— ì •ë¦¬í•´ë†¨ë‹¤.

---

## 1. ì „ì²´ í”Œë¡œìš° ê°œìš”

**ìœ ì € ê´€ì  end-to-end**

1. ë¡œê·¸ì¸/íšŒì›ê°€ì… (Supabase Auth)
2. Homeì—ì„œ YouTube URL ì…ë ¥
3. ë°±ì—”ë“œì—ì„œ

   * transcript ì¶”ì¶œ
   * OpenAIë¡œ ë¶„ì„ (ìš”ì•½/í•˜ì´ë¼ì´íŠ¸/í‚¤ì›Œë“œ/Q&A)
   * Supabaseì— ì €ì¥
4. Video Detail í™”ë©´ì—ì„œ

   * ì˜ìƒ + í•˜ì´ë¼ì´íŠ¸ ë¦¬ìŠ¤íŠ¸
   * êµ¬ê°„ í´ë¦­ â†’ í•´ë‹¹ íƒ€ì„ìŠ¤íƒ¬í”„ ì¬ìƒ
   * ê²€ìƒ‰/í•„í„°
5. My Library / Searchì—ì„œ

   * ê³¼ê±°ì— ì²˜ë¦¬í•œ ì˜ìƒ, í‚¤ì›Œë“œ ê²€ìƒ‰
   * í´ë¦­í•´ì„œ ì¦‰ì‹œ ì¬í•™ìŠµ

---

## 2. Supabase ìŠ¤í‚¤ë§ˆ ì„¤ê³„

### 2.1 í…Œì´ë¸” êµ¬ì¡°

#### `users` (ê¸°ë³¸: Supabase Auth userì™€ 1:1)

```sql
-- Supabase auth.usersë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš© (ë³„ë„ í…Œì´ë¸”ì´ í•„ìš”í•˜ë©´ ì˜ˆì‹œ)
create table profiles (
  id uuid primary key references auth.users(id) on delete cascade,
  created_at timestamptz default now(),
  display_name text,
  avatar_url text
);
```

#### `videos`

```sql
create table videos (
  id uuid primary key default gen_random_uuid(),
  user_id uuid references auth.users(id) on delete cascade,
  youtube_url text not null,
  youtube_video_id text not null,
  title text,
  channel_name text,
  thumbnail_url text,
  duration_seconds int,
  status text not null default 'processing',  -- processing | ready | failed
  error_message text,
  watched_at timestamptz,                     -- ì²˜ìŒ ë³¸/ì²˜ë¦¬í•œ ë‚ ì§œ
  created_at timestamptz default now(),
  updated_at timestamptz default now()
);
```

#### `video_transcripts`

```sql
create table video_transcripts (
  id uuid primary key default gen_random_uuid(),
  video_id uuid references videos(id) on delete cascade,
  language text,             -- 'en', 'ko' ë“±
  raw_transcript text,       -- ì „ì²´ í…ìŠ¤íŠ¸
  created_at timestamptz default now()
);
```

#### `video_segments` (ì˜ë¯¸ ë‹¨ìœ„ êµ¬ê°„)

```sql
create table video_segments (
  id uuid primary key default gen_random_uuid(),
  video_id uuid references videos(id) on delete cascade,
  start_seconds int not null,
  end_seconds int,
  title text,                -- êµ¬ê°„ ì œëª©
  summary text,              -- êµ¬ê°„ ìš”ì•½
  key_sentence text,         -- ëŒ€í‘œ ë¬¸ì¥
  importance int default 1,  -- 1~5 ì •ë„
  created_at timestamptz default now()
);
```

#### `video_keywords`

```sql
create table video_keywords (
  id uuid primary key default gen_random_uuid(),
  video_id uuid references videos(id) on delete cascade,
  keyword text not null,
  weight numeric default 1.0,
  created_at timestamptz default now()
);
```

#### `video_qa_index` (ì§ˆë¬¸-ë‹µë³€ìš© ì¸ë±ìŠ¤)

```sql
create table video_qa_index (
  id uuid primary key default gen_random_uuid(),
  video_id uuid references videos(id) on delete cascade,
  question text not null,
  answer text not null,
  segment_id uuid references video_segments(id),
  created_at timestamptz default now()
);
```

#### `user_highlights` (ìœ ì €ê°€ ì§ì ‘ ì°œí•œ êµ¬ê°„/ë©”ëª¨)

```sql
create table user_highlights (
  id uuid primary key default gen_random_uuid(),
  user_id uuid references auth.users(id) on delete cascade,
  video_id uuid references videos(id) on delete cascade,
  segment_id uuid references video_segments(id),
  note text,                 -- ìœ ì € ë©”ëª¨
  created_at timestamptz default now()
);
```

---

## 3. API ì„¤ê³„ (Next.js Route Handlers ê¸°ì¤€)

ê²½ë¡œ ì˜ˆì‹œëŠ” `/app/api/...` í˜•íƒœë¡œ ìƒê°í•˜ë©´ ëœë‹¤.

### 3.1 ì˜ìƒ ë“±ë¡ / ì²˜ë¦¬

#### `POST /api/videos`

**ëª©ì **: YouTube URL ë“±ë¡ + ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸ ì‹œì‘

**Request Body**

```json
{
  "youtubeUrl": "https://www.youtube.com/watch?v=XXXX"
}
```

**Response (ì„±ê³µ)**

```json
{
  "videoId": "uuid",
  "status": "processing"
}
```

**ê¸°ëŠ¥**

1. URL â†’ `youtube_video_id` íŒŒì‹±
2. `videos`ì— ë ˆì½”ë“œ ìƒì„± (`status = 'processing'`)
3. transcript ì¶”ì¶œ í›„ `video_transcripts` ì €ì¥
4. OpenAI í˜¸ì¶œí•´ì„œ

   * segments ìƒì„± â†’ `video_segments` insert
   * keywords â†’ `video_keywords`
   * QA ì¸ë±ìŠ¤ â†’ `video_qa_index`
5. ì²˜ë¦¬ ì™„ë£Œ í›„ `videos.status = 'ready'` ì—…ë°ì´íŠ¸

---

### 3.2 ì˜ìƒ ìƒì„¸ ì¡°íšŒ

#### `GET /api/videos/[id]`

**Response (ì˜ˆì‹œ)**

```json
{
  "video": {
    "id": "uuid",
    "youtubeUrl": "...",
    "title": "...",
    "status": "ready",
    "watchedAt": "..."
  },
  "segments": [
    {
      "id": "seg-1",
      "startSeconds": 30,
      "endSeconds": 120,
      "title": "ê°œìš”",
      "summary": "ì´ êµ¬ê°„ì—ì„œ ì´ëŸ° ë‚´ìš©ì„ ë‹¤ë£¸",
      "keySentence": "í•µì‹¬ ë¬¸ì¥"
    }
  ],
  "keywords": [
    { "keyword": "React", "weight": 0.9 },
    { "keyword": "state management", "weight": 0.7 }
  ],
  "qa": [
    {
      "id": "qa-1",
      "question": "ì´ íŒ¨í„´ì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ”?",
      "answer": "..."
    }
  ],
  "userHighlights": [
    {
      "id": "uh-1",
      "segmentId": "seg-1",
      "note": "ì´ ë¶€ë¶„ì´ í”„ë¡œì íŠ¸ì— ì§ì ‘ì ìœ¼ë¡œ ì ìš© ê°€ëŠ¥"
    }
  ]
}
```

---

### 3.3 ê²€ìƒ‰ API

#### `GET /api/search`

ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°:

* `q`: ê²€ìƒ‰ì–´ (í‚¤ì›Œë“œÂ·ë¬¸ì¥Â·ì§ˆë¬¸)
* `videoId` (ì˜µì…˜): íŠ¹ì • ì˜ìƒ ë‚´ ê²€ìƒ‰

**ì˜ˆì‹œ**

`GET /api/search?q=state+management&videoId=xxxx`

**Response**

```json
{
  "segments": [
    {
      "videoId": "uuid",
      "segmentId": "seg-1",
      "startSeconds": 120,
      "endSeconds": 210,
      "title": "State ê´€ë¦¬ ë°©ë²•",
      "summary": "ì—¬ê¸°ì„œ ìƒíƒœ ê´€ë¦¬ íŒ¨í„´ì— ëŒ€í•´ ì„¤ëª…",
      "matchScore": 0.92
    }
  ]
}
```

ê²€ìƒ‰ ë¡œì§ì€:

* í‚¤ì›Œë“œ ë§¤ì¹­ (`video_keywords`)
* í…ìŠ¤íŠ¸ ë§¤ì¹­ (`video_segments.summary`, `video_qa_index.question/answer`)
* LLM ì¬ë­í‚¹ (OpenAI)

---

### 3.4 í•˜ì´ë¼ì´íŠ¸/ë©”ëª¨ ì €ì¥

#### `POST /api/videos/[id]/highlights`

**Request Body**

```json
{
  "segmentId": "seg-1",
  "note": "ì´ íŒ¨í„´ì„ ìš°ë¦¬ í”„ë¡œì íŠ¸ì— ì“¸ ìˆ˜ ìˆìŒ"
}
```

**Response**

```json
{
  "id": "uh-1",
  "segmentId": "seg-1",
  "note": "ì´ íŒ¨í„´ì„ ìš°ë¦¬ í”„ë¡œì íŠ¸ì— ì“¸ ìˆ˜ ìˆìŒ"
}
```

---

### 3.5 ë‚´ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¡°íšŒ

#### `GET /api/my/videos`

ì˜µì…˜ íŒŒë¼ë¯¸í„°:

* `keyword` (ê²€ìƒ‰ì–´)
* `orderBy` (recent / watchedAt)

**Response**

```json
{
  "videos": [
    {
      "id": "uuid",
      "title": "React ìƒíƒœ ê´€ë¦¬ íŠœí† ë¦¬ì–¼",
      "thumbnailUrl": "...",
      "status": "ready",
      "watchedAt": "2025-11-15T09:00:00Z",
      "segmentCount": 12
    }
  ]
}
```

---

## 4. ì™€ì´ì–´í”„ë ˆì„ (í™”ë©´ ì„¤ê³„)

í…ìŠ¤íŠ¸ë¡œ êµ¬ì¡°ë§Œ ì¡ì•„ë‘˜ê²Œ. Figma ë§Œë“¤ ë•Œ ê·¸ëŒ€ë¡œ ì˜®ê¸°ë©´ ëœë‹¤.

---

### 4.1 Home í™”ë©´ â€“ â€œURL ì…ë ¥ & ìµœê·¼ ì˜ìƒâ€

**ë ˆì´ì•„ì›ƒ**

* ìƒë‹¨ í—¤ë”

  * ì™¼ìª½: ë¡œê³  / ì„œë¹„ìŠ¤ëª…
  * ì˜¤ë¥¸ìª½: í”„ë¡œí•„ ì•„ë°”íƒ€ / ê³„ì • ë©”ë‰´

* ë©”ì¸ ì˜ì—­

  * ìƒë‹¨ ì¹´ë“œ:

    * í° ì¸í’‹ë°•ìŠ¤: `YouTube URL ì…ë ¥`
    * ë²„íŠ¼: `[ìš”ì•½ ìƒì„±í•˜ê¸°]`
    * URL ì˜ˆì‹œ í…ìŠ¤íŠ¸ (placeholder)

  * í•˜ë‹¨: `ìµœê·¼ ì²˜ë¦¬í•œ ì˜ìƒ ë¦¬ìŠ¤íŠ¸`

    * ì¹´ë“œ í˜•íƒœ ê·¸ë¦¬ë“œ:

      * ì¸ë„¤ì¼
      * ì œëª©
      * ì²˜ë¦¬ ìƒíƒœ ë±ƒì§€ (`processing / ready / failed`)
      * last watched at

**ì•¡ì…˜**

* URL ì…ë ¥ â†’ ë²„íŠ¼ í´ë¦­ â†’ ë¡œë”© ì¸ë””ì¼€ì´í„° â†’ `/videos/[id]`ë¡œ ì´ë™ (status ë”°ë¼ ìŠ¤í”¼ë„ˆ í‘œì‹œ)

---

### 4.2 Video Detail í™”ë©´ â€“ â€œì˜ìƒ Â· í•˜ì´ë¼ì´íŠ¸ Â· ê²€ìƒ‰â€

**ë ˆì´ì•„ì›ƒ**

* ì¢Œì¸¡: ì˜ìƒ í”Œë ˆì´ì–´ ì˜ì—­

  * YouTube embed
  * ì¬ìƒ/ì •ì§€/í˜„ì¬ ì‹œê°„ í‘œì‹œ

* ìš°ì¸¡: íƒ­ êµ¬ì¡°

  1. **[ìš”ì•½] íƒ­**

     * ìƒë‹¨: í•œ ë¬¸ì¥ ìš”ì•½
     * ê·¸ ì•„ë˜: 3~5 ë¬¸ì¥ ìš”ì•½ ë¸”ë¡
     * â€œì´ ì˜ìƒì—ì„œ ë‹¤ë£¨ëŠ” í•µì‹¬ ì§ˆë¬¸ë“¤â€ ë¦¬ìŠ¤íŠ¸

  2. **[í•˜ì´ë¼ì´íŠ¸] íƒ­**

     * êµ¬ê°„ ë¦¬ìŠ¤íŠ¸ (íƒ€ì„ë¼ì¸ ìˆœ)

       * `00:30 ~ 02:10` [êµ¬ê°„ ì œëª©]

         * ìš”ì•½ 1â€“2ì¤„
         * â€œì¬ìƒâ€ ë²„íŠ¼
         * â€œí•˜ì´ë¼ì´íŠ¸ ì¶”ê°€(â™¥)â€ ë²„íŠ¼

  3. **[ê²€ìƒ‰] íƒ­**

     * ê²€ìƒ‰ ì¸í’‹ (`ê¶ê¸ˆí•œ ë¬¸ì¥/í‚¤ì›Œë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”`)
     * ê²€ìƒ‰ ê²°ê³¼:

       * ë§¤ì¹­ëœ êµ¬ê°„ ë¦¬ìŠ¤íŠ¸ (segment)

         * ë¬¸ì¥ í•˜ì´ë¼ì´íŠ¸
         * `ë°”ë¡œ ì¬ìƒ` ë²„íŠ¼

* í•˜ë‹¨/ìš°ì¸¡: `ë‚´ ë©”ëª¨` ì˜ì—­

  * ì„ íƒëœ segmentì— ëŒ€í•œ ë©”ëª¨ ì…ë ¥ í•„ë“œ
  * ê³¼ê±°ì— ë‚¨ê¸´ ë©”ëª¨ ë¦¬ìŠ¤íŠ¸

---

### 4.3 Search í™”ë©´ â€“ â€œì „ì²´ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê²€ìƒ‰â€

**ë ˆì´ì•„ì›ƒ**

* ìƒë‹¨: ê¸€ë¡œë²Œ ê²€ìƒ‰ ë°”

  * Placeholder: â€œì˜ìƒ ë‚´ìš©, í‚¤ì›Œë“œ, ì§ˆë¬¸ìœ¼ë¡œ ê²€ìƒ‰í•´ë³´ì„¸ìš”â€

* ì¤‘ë‹¨: ê²°ê³¼ ì„¹ì…˜

  * íƒ­ 2ê°œ:

    * `[ì˜ìƒ ë‹¨ìœ„ ê²°ê³¼]`

      * ì¹´ë“œ: ì¸ë„¤ì¼ + ì œëª© + ë§¤ì¹­ ì ìˆ˜ + â€œë§¤ì¹­ëœ êµ¬ê°„ Nê°œ ìˆìŒâ€
    * `[êµ¬ê°„ ë‹¨ìœ„ ê²°ê³¼]`

      * ë¦¬ìŠ¤íŠ¸:

        * ì˜ìƒ ì œëª©
        * `00:35 ~ 01:10`
        * ë§¤ì¹­ëœ ë¬¸ì¥ highlight
        * â€œì¬ìƒâ€ ë²„íŠ¼

---

### 4.4 My Library í™”ë©´ â€“ â€œë‚´ê°€ ë³¸ ì˜ìƒ íˆìŠ¤í† ë¦¬â€

**ë ˆì´ì•„ì›ƒ**

* ìƒë‹¨ í•„í„°

  * ì •ë ¬: ìµœê·¼ ë³¸ ìˆœ / ì œëª© ìˆœ
  * í•„í„°: íƒœê·¸/í‚¤ì›Œë“œ (ë‚˜ì¤‘ì— P1)

* ë¦¬ìŠ¤íŠ¸

  * íƒ€ì„ë¼ì¸ ìŠ¤íƒ€ì¼:

    * `2025.11.15`

      * ì¹´ë“œ: ì˜ìƒ 1
      * ì¹´ë“œ: ì˜ìƒ 2
    * `2025.11.14`

      * â€¦

* ê° ì¹´ë“œ êµ¬ì„±

  * ì¸ë„¤ì¼
  * ì œëª©
  * ê°„ë‹¨ ìš”ì•½ 1ì¤„
  * `í•˜ì´ë¼ì´íŠ¸ Nê°œ`, `ë©”ëª¨ Mê°œ` í‘œì‹œ

---

## 5. ì‹œí€€ìŠ¤ í”Œë¡œìš° (í…ìŠ¤íŠ¸ ë‹¤ì´ì–´ê·¸ë¨)

### 5.1 URL ì…ë ¥ â†’ ì²˜ë¦¬ ì™„ë£Œê¹Œì§€

1. ìœ ì €: Homeì—ì„œ URL ì…ë ¥ â†’ `POST /api/videos`
2. ë°±ì—”ë“œ:

   * `videos` row ìƒì„± (status='processing')
   * transcript ì¶”ì¶œ â†’ `video_transcripts` ì‚½ì…
   * OpenAI í˜¸ì¶œ (ìš”ì•½/segments/keywords/QA)
   * ê°ê° `video_segments`, `video_keywords`, `video_qa_index` ì‚½ì…
   * `videos.status = 'ready'` ì—…ë°ì´íŠ¸
3. í”„ë¡ íŠ¸:

   * ì‘ë‹µë°›ì€ `videoId`ë¡œ `/videos/[id]` ì´ë™
   * statusê°€ `processing`ì´ë©´ ìŠ¤í”¼ë„ˆ + ìƒíƒœ í´ë§
   * `ready`ê°€ ë˜ë©´ ìš”ì•½/í•˜ì´ë¼ì´íŠ¸ ë Œë”ë§

---

### 5.2 ê²€ìƒ‰ íë¦„

1. ìœ ì €: Search í™”ë©´ì—ì„œ `q` ì…ë ¥ â†’ `GET /api/search?q=...`
2. ë°±ì—”ë“œ:

   * í…ìŠ¤íŠ¸ ê²€ìƒ‰ (segments.summary, qa.question, qa.answer, keywords.keyword)
   * ê°„ë‹¨ ìŠ¤ì½”ì–´ë§ or OpenAI ê¸°ë°˜ ì¬ë­í‚¹
3. í”„ë¡ íŠ¸:

   * ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ í‘œì‹œ
   * í´ë¦­ ì‹œ `/videos/[id]?t=123` í˜•ì‹ìœ¼ë¡œ ì´ë™ ë° ì‹œì  ì í”„

---

## 6. í˜•ë‹˜ì´ ë°”ë¡œ ë‹¤ìŒì— í•  ìˆ˜ ìˆëŠ” ì•¡ì…˜

1. **ì´ PRD + ì™€ì´ì–´í”„ë ˆì„ í…ìŠ¤íŠ¸ë¥¼ Notion/Confluenceì— ê·¸ëŒ€ë¡œ ë¶™ì—¬ ë„£ê¸°**
2. Next.js í”„ë¡œì íŠ¸ ê¸°ì¤€ìœ¼ë¡œ:

   * `/app/api/videos/route.ts`
   * `/app/api/videos/[id]/route.ts`
   * `/app/api/search/route.ts`
     ì´ëŸ° ì‹ìœ¼ë¡œ ë¼ìš°íŠ¸ êµ¬ì¡°ë§Œ ë¨¼ì € ì¡ê¸°
3. Supabase ì½˜ì†”ì—ì„œ

   * ìœ„ ìŠ¤í‚¤ë§ˆëŒ€ë¡œ í…Œì´ë¸” ìƒì„±
   * Row-Level Security ì •ì±…ì€ ë‚˜ì¤‘ì— ê°™ì´ ì„¤ê³„ ê°€ëŠ¥

ì›í•˜ë©´ **ì‹¤ì œ Supabase ìŠ¤í‚¤ë§ˆìš© SQL ì „ì²´ ìŠ¤í¬ë¦½íŠ¸**ë‘
**Next.jsìš© íƒ€ì… ì •ì˜(ì˜ˆ: `Video`, `VideoSegment` íƒ€ì…)**ê¹Œì§€ ë°”ë¡œ ë½‘ì•„ì¤„ê¹Œ?
